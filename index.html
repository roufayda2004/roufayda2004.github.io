<!DOCTYPE html><html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø£Ù‡Ø¯Ø§Ù - Ù…Ø§Ù„ ÙˆØµØ­Ø©</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"/>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: 'Cairo', sans-serif;
      direction: rtl;
      margin: 0;
      background: white;
      transition: background 2s ease-in-out;
    }
    #toggleBg, #toggleSidebar {
      position: fixed;
      padding: 10px;
      background-color: #333;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      z-index: 1000;
    }
    #toggleBg { top: 10px; left: 10px; }
    #toggleSidebar { top: 10px; right: 10px; }
    #sidebar {
      position: fixed;
      top: 0;
      right: -200px;
      width: 200px;
      height: 100%;
      background: linear-gradient(120deg, #43cea2, #185a9d);
      color: #fff;
      padding: 10px;
      box-shadow: -2px 0 10px rgba(0,0,0,0.3);
      transition: right 0.3s;
      z-index: 999;
    }
    #sidebar.active {
      right: 0;
    }
    #sidebar button {
      background: #fff;
      color: #185a9d;
      border: none;
      padding: 10px;
      margin: 10px 0;
      border-radius: 5px;
      width: 100%;
      font-weight: bold;
      cursor: pointer;
    }
    .section {
      display: none;
    }
    .section.active {
      display: block;
      padding: 20px;
      background: #fff;
      margin: 20px 10px;
      border-radius: 10px;
    }
    canvas {
      max-width: 100%;
      margin-top: 20px;
    }
    @media (max-width: 600px) {
      .section.active {
        margin: 10px 5px;
        padding: 15px 10px;
      }
    }
  </style>
</head>
<body>
  <button id="toggleBg">ğŸ¨ Ø§Ù„Ø®Ù„ÙÙŠØ©</button>
  <button id="toggleSidebar">ğŸ“‹ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
  <div id="sidebar">
    <button onclick="showSection('money')">ğŸ’° Ø§Ù„Ù…Ø§Ù„</button>
    <button onclick="showSection('smoking')">ğŸš­ Ø§Ù„ØªØ¯Ø®ÙŠÙ†</button>
  </div>
  <header><h1>ğŸ“Š ØªØ·Ø¨ÙŠÙ‚ ØªØªØ¨Ø¹ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù - Ù…Ø§Ù„ ÙˆØµØ­Ø©</h1></header>
  <main>
    <section id="money" class="section active">
      <h2>Ù‚Ø³Ù… Ø§Ù„Ù…Ø§Ù„</h2>
      <input type="number" id="targetInput" value="50000" onchange="updateTarget()">
      <div id="inputsContainer"></div>
      <p>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: <span id="collected">0</span></p>
      <p>Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: <span id="remaining">0</span></p>
      <p>Ø§Ù„Ù…Ø·Ù„ÙˆØ¨/ÙŠÙˆÙ…: <span id="dailyNeeded">0</span></p>
      <p>Ø§Ù„Ø£Ø¹Ù„Ù‰: <span id="maxDay">0</span></p>
      <p>Ø§Ù„Ø£Ø¯Ù†Ù‰: <span id="minDay">0</span></p>
      <p>Ø§Ù„Ù…ØªÙˆØ³Ø·: <span id="avgPerDay">0</span></p>
      <button onclick="calculate()">Ø­Ø³Ø§Ø¨</button>
      <canvas id="moneyChart"></canvas>
    </section>
    <section id="smoking" class="section">
      <h2>Ù‚Ø³Ù… Ø§Ù„ØªØ¯Ø®ÙŠÙ†</h2>
      <label>Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù…: <input type="number" id="quitDays" value="30"></label>
      <label>Ø«Ù…Ù† Ø§Ù„Ø¹Ù„Ø¨Ø©: <input type="number" id="cigPrice" value="300"></label>
      <label>Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ø¬Ø§Ø¦Ø±/Ø¹Ù„Ø¨Ø©: <input type="number" id="cigsPerPack" value="20"></label>
      <label>Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ¯Ø®ÙŠÙ† Ø§Ù„ÙŠÙˆÙ…ÙŠ: <input type="number" id="currentCigs" value="10"></label>
      <label>Ø³Ù†ÙˆØ§Øª Ø§Ù„ØªØ¯Ø®ÙŠÙ†: <input type="number" id="smokeYears" value="5"></label>
      <button onclick="generateQuitPlan()">Ø§Ø¨Ø¯Ø£</button>
      <div id="quitResults"></div>
      <div id="motivationalQuote"></div>
      <table id="quitTable"></table>
      <canvas id="smokeChart"></canvas>
    </section>
  </main>
  <script>
    let target = parseInt(localStorage.getItem('target')) || 50000;
    document.getElementById('targetInput').value = target;
    const container = document.getElementById('inputsContainer');
    for (let i = 1; i <= 30; i++) {
      const input = document.createElement('input');
      input.type = 'number';
      input.placeholder = 'Ø§Ù„ÙŠÙˆÙ… ' + i;
      input.value = localStorage.getItem('day' + i) || '';
      input.oninput = () => localStorage.setItem('day' + i, input.value);
      input.className = 'day';
      container.appendChild(input);
    }function calculate() {
  let total = 0, count = 0, min = Infinity, max = -Infinity;
  let values = [];
  document.querySelectorAll('.day').forEach((el, i) => {
    const val = parseFloat(el.value);
    if (!isNaN(val)) {
      total += val;
      count++;
      if (val > max) max = val;
      if (val < min && val > 0) min = val;
    }
    values[i] = isNaN(val) ? 0 : val;
  });
  const remaining = Math.max(0, target - total);
  const dailyNeeded = count < 30 ? Math.ceil(remaining / (30 - count)) : 0;
  const avg = count > 0 ? Math.round(total / count) : 0;
  const ctx = document.getElementById('moneyChart').getContext('2d');
  if (window.moneyChart) window.moneyChart.destroy();
  window.moneyChart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: Array.from({length: 30}, (_, i) => `ÙŠÙˆÙ… ${i+1}`),
      datasets: [{
        label: 'Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„ÙŠÙˆÙ…ÙŠ',
        data: values,
        backgroundColor: 'rgba(75, 192, 192, 0.5)'
      }]
    },
    options: {
      responsive: true,
      scales: { y: { beginAtZero: true } }
    }
  });
  document.getElementById('collected').innerText = total;
  document.getElementById('remaining').innerText = remaining;
  document.getElementById('dailyNeeded').innerText = dailyNeeded;
  document.getElementById('avgPerDay').innerText = avg;
  document.getElementById('maxDay').innerText = max > 0 ? max : 0;
  document.getElementById('minDay').innerText = min !== Infinity ? min : 0;
}

function updateTarget() {
  target = parseInt(document.getElementById('targetInput').value);
  localStorage.setItem('target', target);
}

function showSection(id) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

function toggleSidebar() {
  document.getElementById('sidebar').classList.toggle('active');
}

let bgState = 0;
function toggleBackground() {
  const states = [
    'linear-gradient(0deg, white, darkred, white)',
    'linear-gradient(120deg, #f6d365, #fda085)',
    'white'
  ];
  bgState = (bgState + 1) % states.length;
  document.body.style.background = states[bgState];
}

function generateQuitPlan() {
  const days = parseInt(document.getElementById('quitDays').value);
  const price = parseFloat(document.getElementById('cigPrice').value);
  const perPack = parseInt(document.getElementById('cigsPerPack').value);
  const daily = parseInt(document.getElementById('currentCigs').value);
  const years = parseInt(document.getElementById('smokeYears').value);
  const totalCigs = daily * days;
  const totalNic = totalCigs;
  const cost = Math.ceil((totalCigs / perPack) * price);
  document.getElementById('quitResults').innerHTML = `ğŸ’¨ Ù†ÙŠÙƒÙˆØªÙŠÙ† Ù…Ø­ØªÙ…Ù„: ${totalNic} Ù…Ù„Øº<br>ğŸ’¸ Ø§Ù„ØªÙˆÙÙŠØ±: ${cost} Ø¯Ø¬`;
  const quotes = [
    'ğŸ’ª ÙƒÙ„ ÙŠÙˆÙ… Ø¨Ø¯ÙˆÙ† ØªØ¯Ø®ÙŠÙ† Ù‡Ùˆ Ù†ØµØ± ØµØºÙŠØ±!',
    'ğŸš€ Ø£Ù†Øª Ø£Ù‚ÙˆÙ‰ Ù…Ù† Ø§Ù„Ø¹Ø§Ø¯Ø©!',
    'ğŸŒ¿ ØµØ­ØªÙƒ Ø£ÙˆÙ„Ù‰ Ø¨Ø§Ù„ØªØºÙŠÙŠØ±.',
    'â³ Ø§Ù„Ø¯Ù‚Ø§Ø¦Ù‚ Ø§Ù„Ø®Ø§Ù„ÙŠØ© Ù…Ù† Ø§Ù„ØªØ¯Ø®ÙŠÙ† ØªØ¶ÙŠÙ Ø³Ù†ÙˆØ§Øª Ù„Ø­ÙŠØ§ØªÙƒ.'
  ];
  document.getElementById('motivationalQuote').innerText = quotes[Math.floor(Math.random() * quotes.length)];
  let table = '<tr><th>Ø§Ù„ÙŠÙˆÙ…</th><th>Ø§Ù„Ù…Ø³Ù…ÙˆØ­</th><th>Ø§Ù„Ù…ÙØ³Ø¬Ù„</th></tr>';
  let chartData = [];
  for (let i = 1; i <= days; i++) {
    let allowed = Math.round(daily * (1 - (i / days)));
    chartData.push(allowed);
    table += `<tr><td>${i}</td><td>${allowed}</td><td><input type='number'></td></tr>`;
  }
  document.getElementById('quitTable').innerHTML = table;
  const ctx = document.getElementById('smokeChart').getContext('2d');
  if (window.smokeChart) window.smokeChart.destroy();
  window.smokeChart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: Array.from({length: days}, (_, i) => `ÙŠÙˆÙ… ${i+1}`),
      datasets: [{
        label: 'Ø§Ù„Ø³Ø¬Ø§Ø¦Ø± Ø§Ù„Ù…Ø³Ù…ÙˆØ­ Ø¨Ù‡Ø§',
        data: chartData,
        fill: false,
        borderColor: 'rgba(220,53,69,1)',
        tension: 0.1
      }]
    },
    options: {
      responsive: true,
      scales: { y: { beginAtZero: true } }
    }
  });
}

window.onload = () => {
  calculate();
}

  </script>
</body>
</html>