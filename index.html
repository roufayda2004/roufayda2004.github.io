<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø³Ø§Ø± Ø§Ù„ØªØ¹Ø§ÙÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù… Ù…Ù† Ø§Ù„ØªØ¯Ø®ÙŠÙ†</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* CSS Ø§Ù„Ø³Ø§Ø¨Ù‚ Ù…Ø¹ Ø¥Ø¶Ø§ÙØ© ØªØ­Ø³ÙŠÙ†Ø§Øª */
        .progress-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }
        
        .chart-box {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
        }
        
        .achievement-badge {
            background: #3498db;
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.9em;
            margin-left: 10px;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #27ae60;
            color: white;
            padding: 15px;
            border-radius: 10px;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="notification" id="notification"></div>
        
        <h1>Ù…Ø³Ø§Ø± Ø§Ù„ØªØ¹Ø§ÙÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù… ğŸš­</h1>
        
        <div class="time-box">
            <!-- Ø¥Ø¶Ø§ÙØ© Ø­Ù‚ÙˆÙ„ Ø¬Ø¯ÙŠØ¯Ø© -->
            <p>Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ø¬Ø§Ø¦Ø± Ø§Ù„ÙŠÙˆÙ…ÙŠØ© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©: <input type="number" id="cigarettes" min="1" value="20"></p>
            <p>Ø³Ø¹Ø± Ø§Ù„Ø¹Ù„Ø¨Ø© (Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±): <input type="number" id="packPrice" min="1" value="5"></p>
            <p>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù‚Ù„Ø§Ø¹: <input type="datetime-local" id="quitDate"></p>
            <button onclick="startTracking()">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØªØ¨Ø¹</button>
            <div id="elapsedTime"></div>
            <div id="savings"></div>
        </div>

        <div class="progress-container">
            <div class="timeline" id="timeline"></div>
            <div class="chart-box">
                <canvas id="healthChart"></canvas>
            </div>
        </div>

        <!-- Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª -->
        <div class="achievements">
            <h3>ğŸ† Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª</h3>
            <div id="achievementsList"></div>
        </div>

        <button onclick="toggleBenefits()">Ø¹Ø±Ø¶ Ø§Ù„ÙÙˆØ§Ø¦Ø¯ Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©</button>
        <div class="benefits" id="benefits">
            <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø³Ø§Ø¨Ù‚ -->
        </div>
    </div>

    <script>
        // Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
        let chart;
        const achievements = [
            { id: 1, hours: 24, title: "Ø§Ù„Ø¨Ù‚Ø§Ø¡ ÙŠÙˆÙ… ÙƒØ§Ù…Ù„ Ø¨Ø¯ÙˆÙ† ØªØ¯Ø®ÙŠÙ†" },
            { id: 2, hours: 168, title: "Ø£Ø³Ø¨ÙˆØ¹ Ù…Ù† Ø§Ù„ØªØ¹Ø§ÙÙŠ" },
            { id: 3, hours: 720, title: "Ø´Ù‡Ø± Ù…Ù† Ø§Ù„Ø­Ø±ÙŠØ©" },
            { id: 4, hours: 8760, title: "Ø¨Ø·Ù„ Ø§Ù„Ø³Ù†Ø©" }
        ];

        function calculateSavings(elapsedHours) {
            const cigsPerDay = parseInt(document.getElementById('cigarettes').value);
            const packPrice = parseInt(document.getElementById('packPrice').value);
            
            const days = elapsedHours / 24;
            const packsPerDay = cigsPerDay / 20;
            const savings = days * packsPerDay * packPrice;
            
            document.getElementById('savings').innerHTML = `
                ğŸ’µ Ø§Ù„Ù…Ø¯Ø®Ø±Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©: $${savings.toFixed(2)}
            `;
        }

        function updateChart(elapsedDays) {
            const ctx = document.getElementById('healthChart').getContext('2d');
            
            if(chart) chart.destroy();
            
            chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Ø§Ù„Ù‚Ù„Ø¨', 'Ø§Ù„Ø±Ø¦Ø©', 'Ø§Ù„Ø¯Ù…', 'Ø§Ù„Ù…Ù†Ø§Ø¹Ø©', 'Ø§Ù„Ø·Ø§Ù‚Ø©'],
                    datasets: [{
                        label: 'ØªØ­Ø³Ù† Ø§Ù„ØµØ­Ø© (%)',
                        data: [
                            Math.min(100, elapsedDays * 0.5),
                            Math.min(100, elapsedDays * 0.7),
                            Math.min(100, elapsedDays * 2),
                            Math.min(100, elapsedDays * 1.2),
                            Math.min(100, elapsedDays * 1.5)
                        ],
                        backgroundColor: 'rgba(46, 204, 113, 0.2)',
                        borderColor: '#2ecc71',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });
        }

        function checkAchievements(elapsedHours) {
            const achieved = achievements.filter(a => elapsedHours >= a.hours);
            const list = document.getElementById('achievementsList');
            list.innerHTML = achieved.map(a => `
                <div class="milestone completed">
                    ${a.title}
                    <span class="achievement-badge">ğŸ…</span>
                </div>
            `).join('');
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø¥Ø´Ø¹Ø§Ø± Ø¹Ù†Ø¯ ØªØ­Ù‚ÙŠÙ‚ Ø¥Ù†Ø¬Ø§Ø² Ø¬Ø¯ÙŠØ¯
            if(achieved.length > document.achievedCount) {
                showNotification(`ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! Ø­Ù‚Ù‚Øª Ø¥Ù†Ø¬Ø§Ø²: ${achieved.slice(-1)[0].title}`);
                document.achievedCount = achieved.length;
            }
        }

        function showNotification(message) {
            const notif = document.getElementById('notification');
            notif.textContent = message;
            notif.style.display = 'block';
            setTimeout(() => notif.style.display = 'none', 3000);
        }

        // ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¯Ø§Ù„Ø© updateTimer
        function updateTimer() {
            const quitDate = new Date(document.getElementById('quitDate').value);
            const now = new Date();
            const elapsed = now - quitDate;
            
            const days = Math.floor(elapsed / (1000 * 60 * 60 * 24));
            const hours = Math.floor((elapsed % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((elapsed % (1000 * 60 * 60)) / (1000 * 60));

            document.getElementById('elapsedTime').innerHTML = `
                â³ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ù†Ù‚Ø¶ÙŠ: ${days} Ø£ÙŠØ§Ù… ${hours} Ø³Ø§Ø¹Ø§Øª ${minutes} Ø¯Ù‚Ø§Ø¦Ù‚
            `;

            const elapsedHours = elapsed / 1000 / 60 / 60;
            updateTimeline(elapsedHours);
            calculateSavings(elapsedHours);
            updateChart(days);
            checkAchievements(elapsedHours);
        }

        // Ø¨Ø¯Ø¡ Ø§Ù„ØªØªØ¨Ø¹ Ù…Ø¹ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‚ÙŠÙ…
        function startTracking() {
            if (!document.getElementById('quitDate').value) {
                showNotification('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù‚Ù„Ø§Ø¹ Ø£ÙˆÙ„Ø§Ù‹');
                return;
            }
            document.achievedCount = 0;
            setInterval(updateTimer, 1000);
            updateTimer();
        }
    </script>
</body>
</html>
